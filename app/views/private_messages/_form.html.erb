
<%= simple_form_for(@private_message) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

  <div class="form-inputs">
    <%= f.input :object %>
    <%= f.input :content %>
    <h5>Faites control+click pour en s√©lectionner plusieurs</h5>
    <%= f.collection_check_boxes :recipients_user_ids, User.all, :id, :email ,  {:item_wrapper_class => 'checkbox_container'} %>
    <div class="check-boxes-container">
      <%= f.association :recipients_user, label: false, label_method: :email, value_method: :id, include_blank: false, as: :check_boxes%>
    </div>
    <br>
    <%= f.select :recipients_admin_ids, Admin.all.collect {|x| [x.email, x.id]}, {}, :multiple => true%>
    <%= f.collection_check_boxes :recipients_admin_ids, Admin.all, :id, :email %>

    <%if user_signed_in?%>
      <%= f.hidden_field :author_id , value: current_user.id %>
      <%= f.hidden_field :author_type , value: "User" %>
    <%elsif admin_signed_in?%>
      <%= f.hidden_field :author_id , value: current_admin.id %>
      <%= f.hidden_field :author_type , value: "Admin" %>
    <%end%>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %>
